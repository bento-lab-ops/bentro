<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BenTro - Retrospectives, packed perfectly!</title>
    <link rel="icon" type="image/png" href="/static/bentrologo.png">
    <link rel="stylesheet" href="/static/styles.css?v=0.8.0">
    <link rel="stylesheet" href="/static/bentro.css?v=0.8.0">
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
</head>

<body>
    <div class="container mobile-container-fix">
        <header class="header">
            <div class="header-left">
                <div class="brand-logo-title">
                    <img src="/static/bentrologo.png" alt="BenTro Logo" class="header-logo">
                    <h1 class="title" data-i18n="app.title">BenTro</h1>
                </div>

            </div>

            <div class="header-right">
                <div id="headerControls" class="header-controls"
                    style="display: flex; gap: 0.5rem; align-items: center;">
                    <button id="newBoardBtn" class="btn btn-primary btn-small" data-i18n="btn.new_board">+ New
                        Board</button>
                    <button id="dashboardBtn" class="btn btn-outline btn-small" onclick="showDashboard()"
                        style="display: none;" data-i18n="btn.dashboard">Dashboard</button>

                    <button id="leaveBoardBtn" class="btn btn-danger btn-small" onclick="leaveBoardAction()"
                        style="display: none;" data-i18n="btn.leave">Leave</button>
                </div>
                <div class="lang-selector-container">
                    <button class="icon-btn" onclick="toggleLangMenu()" title="Select Language"
                        style="font-size: 1.2rem;">üåê</button>
                    <div id="langMenu" class="lang-dropdown">
                        <button onclick="i18n.setLanguage('en')">English (US) üá∫üá∏</button>
                        <button onclick="i18n.setLanguage('pt-BR')">Portugu√™s (BR) üáßüá∑</button>
                    </div>
                </div>
                <!-- Avatar Only -->
                <span id="userDisplay" class="user-display" onclick="openEditUserModal()"></span>
                <button class="hamburger-btn" onclick="toggleMenu()" title="Menu">‚ò∞</button>
            </div>
        </header>

        <!-- Dashboard View -->
        <div id="dashboardView" class="dashboard-view">
            <div class="dashboard-header">
                <h2 data-i18n="heading.board_list">Board List</h2>
                <div class="board-filters">
                    <button class="filter-tab active" onclick="filterBoards('active')" id="filterActiveBtn"
                        data-i18n="tab.active">Active</button>
                    <button class="filter-tab" onclick="filterBoards('finished')" id="filterFinishedBtn"
                        data-i18n="tab.finalized">Finalized</button>
                </div>
            </div>
            <div id="dashboardGrid" class="dashboard-grid">
                <!-- Boards will be loaded here -->
            </div>

            <div id="emptyDashboard" class="welcome-screen" style="display: none;">
                <div class="welcome-content">
                    <h2 data-i18n="msg.no_boards">No Boards Yet</h2>
                    <p data-i18n="msg.click_new_board">Click "+ New Board" in the header to create your first
                        retrospective.</p>

                </div>
            </div>
        </div>

        <!-- Action Items View -->
        <div id="actionItemsView" class="dashboard-view" style="display: none;">
            <div class="view-header">
                <h2 data-i18n="heading.action_items">‚ö° My Action Items</h2>
            </div>
            <div id="actionItemsList" class="action-items-container">
                <!-- Items table will be loaded here -->
            </div>
        </div>

        <!-- Admin View -->
        <div id="adminView" class="dashboard-view" style="display: none;">
            <div id="adminContent" class="admin-container">
                <!-- Admin Content Loaded Here -->
            </div>
        </div>

        <!-- Board View -->
        <div id="boardContainer" class="board-container" style="display: none;">
            <div id="readOnlyBanner" class="read-only-banner" style="display: none;" data-i18n="banner.read_only">
                ‚ö†Ô∏è This board is finished (Read Only)
            </div>

            <div class="board-header-section">
                <h2 id="boardTitle"></h2>
                <div id="voteStatusDisplay" class="vote-status-display" style="display:none;"></div>
                <div class="participants-wrapper">
                    <span class="participants-label" data-i18n="label.active_participants">Active:</span>
                    <div id="participantsContainer" class="participants-container"></div>
                </div>
                <button id="claimManagerBtn" class="btn btn-outline btn-sm" onclick="claimManagerAction()"
                    title="Claim Moderation" style="display: none;">üëë Claim Host</button>
                <button id="adminSettingsBtn" class="btn btn-icon btn-sm" onclick="openBoardSettings()"
                    title="Admin Settings" style="display: none;">‚öôÔ∏è</button>
            </div>

            <!-- Timer Section -->
            <div class="timer-section">
                <div class="phase-info">
                    <span class="phase-label" data-i18n="label.current_phase">Current Phase:</span>
                    <span id="currentPhase" class="phase-name" data-i18n="phase.input">Input Phase</span>
                </div>
                <div class="timer-display">
                    <span id="timerDisplay" class="timer-text">00:00</span>
                </div>
                <div class="timer-controls">
                    <input type="number" id="timerMinutes" class="timer-input" placeholder="Minutes" min="1" max="60"
                        value="5">
                    <button id="startTimerBtn" class="btn btn-success" data-i18n="btn.start_timer">Start Timer</button>
                    <button id="stopTimerBtn" class="btn btn-danger" style="display: none;"
                        data-i18n="btn.stop_timer">Stop Timer</button>
                    <button id="switchPhaseBtn" class="btn btn-secondary" data-i18n="btn.switch_voting">Switch to
                        Voting</button>
                    <button id="exportBoardBtn" class="btn btn-secondary" onclick="exportCurrentBoard()"
                        data-i18n="btn.export_csv">üìä Export
                        CSV</button>
                    <button id="finishRetroBtn" class="btn btn-danger" onclick="finishRetro()"
                        data-i18n="btn.finish_retro">Finish Retro</button>
                    <button id="reopenRetroBtn" class="btn btn-warning" style="display: none;" onclick="reopenRetro()"
                        data-i18n="btn.reopen_retro">Re-open Retro</button>
                </div>
            </div>

            <!-- Columns Section -->
            <div id="columnsContainer" class="columns-container">
                <!-- Columns will be dynamically added here -->
            </div>

            <!-- Add Column Button -->
            <div class="add-column-section">
                <button id="addColumnBtn" class="btn btn-outline" data-i18n="btn.add_column">+ Add Column</button>
            </div>
        </div>
    </div> <!-- End .container -->

    <div id="appSidebar" class="app-sidebar">
        <ul id="menuList" class="menu-list"></ul>
        <div class="sidebar-footer">
            <small>BenTro <span id="appVersionFooter"></span></small>
        </div>
    </div>
    <div id="sidebarOverlay" class="sidebar-overlay" onclick="toggleMenu()"></div>

    <!-- Modals Container (Loaded dynamically) -->
    <div id="modals-container"></div>

    <script src="/static/js/i18n.js?v=0.8.0"></script>
    <script src="/static/js/config.js?v=0.8.0"></script>
    <script src="/static/js/version.js?v=0.8.0"></script>
    <script src="/static/js/avatars.js?v=0.8.0"></script>
    <script src="/static/js/state.js?v=0.8.0"></script>
    <script src="/static/js/utils.js?v=0.8.0"></script>
    <script src="/static/js/api.js?v=0.8.0"></script>
    <script src="/static/js/timer.js?v=0.8.0"></script>
    <script src="/static/js/board.js?v=0.8.0"></script>
    <script src="/static/js/action_items.js?v=0.8.0"></script>
    <script src="/static/js/admin.js?v=0.8.0"></script>
    <script src="/static/js/menu.js?v=0.8.0"></script>
    <script src="/static/js/main.js?v=0.8.0"></script>
</body>

</html>