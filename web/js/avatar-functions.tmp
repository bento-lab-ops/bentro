// Avatar Selection Functions
function populateAvatarSelector() {
    const selector = document.getElementById('avatarSelector');
    if (!selector) return;
    
    const currentAvatar = getUserAvatar();
    
    selector.innerHTML = AVAILABLE_AVATARS.map(avatar => `
        <div class="avatar-option ${avatar === currentAvatar ? 'selected' : ''}" 
             data-avatar="${avatar}"
             onclick="selectAvatar('${avatar}')">
            ${avatar}
        </div>
    `).join('');
}

function selectAvatar(avatar) {
    // Remove previous selection
    document.querySelectorAll('.avatar-option').forEach(el => {
        el.classList.remove('selected');
    });
    
    // Add selection to clicked avatar
    const clickedElement = document.querySelector(`[data-avatar="${avatar}"]`);
    if (clickedElement) {
        clickedElement.classList.add('selected');
    }
    
    // Update hidden input
    document.getElementById('selectedAvatar').value = avatar;
    setUserAvatar(avatar);
}
